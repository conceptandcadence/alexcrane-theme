{% capture review_header %}
	<div class="swiper-slide reviews-carousel__quote !tw-flex tw-flex-col tw-relative tw-items-center tw-justify-between tw-p-12 tw-border tw-border-[#ececec] tw-rounded-[5px]">
		<div class="reviews-carousel__quote-wrapper tw-flex tw-flex-col tw-text-left tw-justify-between tw-items-start tw-relative tw-h-full tw-flex-grow tw-w-full">
			
			{% if product.metafields.yotpo.reviews_average != blank %}
				<div class="review-top-wrapper tw-flex tw-flex-col tw-gap-4">
					<h3 class="reviews-carousel__headline tw-text-left tw-max-w-sm tw-font-normal tw-text-[32px] tw-leading-[36px] tw-m-0 md:tw-max-w-full tw-flex-grow tw-flex tw-items-center tw-gap-3">
						<span class='reviews-overview__average'>{{ product.metafields.yotpo.reviews_average }}</span>
						<ul class='reviews-overview__stars tw-text-[24px] tw-flex tw-items-center tw-gap-1'>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
						</ul>
					</h3>
					<div class="tw-text-[14px] tw-leading-[20px]">
						An average customer rating of <span class='reviews-overview__average'>{{ product.metafields.yotpo.reviews_average }}</span> out of 5 stars, based on
						<span class='reviews-overview__count'>{{ product.metafields.yotpo.reviews_count }}</span> reviews.
					</div>
				</div>
				<a href="#" class="button button--secondary">Read All Reviews</a>
			{% else %}
			<div class="review-top-wrapper tw-flex tw-flex-col tw-gap-4">
				<h3 class="reviews-carousel__headline tw-text-left tw-max-w-sm tw-font-normal tw-text-[32px] tw-leading-[36px] tw-m-0 md:tw-max-w-full tw-flex-grow tw-flex tw-items-center tw-gap-3">
					<span class='reviews-overview__average'>No reviews yet</span>
				</h3>
				<div>
					Be the first to leave a review.
				</div>
			</div>
			<a href="#" class="button button--secondary">Write a Review</a>
			{% endif %}
		</div>
	</div>
{% endcapture %}

{% capture review_blocks %}
	<div class="swiper-slide reviews-carousel__quote !tw-flex tw-flex-col tw-relative tw-items-center tw-justify-between tw-p-12 tw-border tw-border-[#ececec] tw-rounded-[5px]">
		<div class="reviews-carousel__quote-wrapper tw-flex tw-flex-col tw-text-left tw-justify-between tw-items-start tw-relative tw-h-full tw-flex-grow tw-w-full">			
				<div class="review-top-wrapper tw-flex tw-flex-col tw-gap-4">
					<h3 class="reviews-carousel__headline tw-text-left tw-max-w-sm tw-font-normal tw-text-[32px] tw-leading-[36px] tw-m-0 md:tw-max-w-full tw-flex-grow tw-flex tw-items-center tw-gap-3">
						<ul class='reviews-overview__stars tw-text-[14px] tw-flex tw-items-center tw-gap-1'>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
						</ul>
					</h3>
					<div class="tw-text-[14px] tw-leading-[20px]">
						Material and color (Moss) are beautiful. It's thicker linen than I'm accustomed to, and quite luxurious.
					</div>
				</div>
				<a href="#" class="tw-text-[12px]">&ndash;John R</a>
		</div>
	</div>
	<div class="swiper-slide reviews-carousel__quote !tw-flex tw-flex-col tw-relative tw-items-center tw-justify-between tw-p-12 tw-border tw-border-[#ececec] tw-rounded-[5px]">
		<div class="reviews-carousel__quote-wrapper tw-flex tw-flex-col tw-text-left tw-justify-between tw-items-start tw-relative tw-h-full tw-flex-grow tw-w-full">			
				<div class="review-top-wrapper tw-flex tw-flex-col tw-gap-4">
					<h3 class="reviews-carousel__headline tw-text-left tw-max-w-sm tw-font-normal tw-text-[32px] tw-leading-[36px] tw-m-0 md:tw-max-w-full tw-flex-grow tw-flex tw-items-center tw-gap-3">
						<ul class='reviews-overview__stars tw-text-[14px] tw-flex tw-items-center tw-gap-1'>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
						</ul>
					</h3>
					<div class="tw-text-[14px] tw-leading-[20px]">
						I&apos;ve enjoyed every item in purchased so far. The fit is very accurate, light weight construction makes for easy movement, comfortable to wear day or night and easy to mix and match looks for super casual to dressy. I&apos;m looking forward to adding to my collection.
						</div>
				</div>
				<a href="#" class="tw-text-[12px]">&ndash;Scott C</a>
		</div>
	</div>
	<div class="swiper-slide reviews-carousel__quote !tw-flex tw-flex-col tw-relative tw-items-center tw-justify-between tw-p-12 tw-border tw-border-[#ececec] tw-rounded-[5px]">
		<div class="reviews-carousel__quote-wrapper tw-flex tw-flex-col tw-text-left tw-justify-between tw-items-start tw-relative tw-h-full tw-flex-grow tw-w-full">			
				<div class="review-top-wrapper tw-flex tw-flex-col tw-gap-4">
					<h3 class="reviews-carousel__headline tw-text-left tw-max-w-sm tw-font-normal tw-text-[32px] tw-leading-[36px] tw-m-0 md:tw-max-w-full tw-flex-grow tw-flex tw-items-center tw-gap-3">
						<ul class='reviews-overview__stars tw-text-[14px] tw-flex tw-items-center tw-gap-1'>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
						</ul>
					</h3>
					<div class="tw-text-[14px] tw-leading-[20px]">
						The color is beautiful and the fit is just right. Loose enough to not restrict my torso and pairs well with different color shorts. This is my second Playa shirt and I have a feeling I'll purchase more in the near future.						
						</div>
				</div>
				<a href="#" class="tw-text-[12px]">&ndash;Allan B</a>
		</div>
	</div>
	<div class="swiper-slide reviews-carousel__quote !tw-flex tw-flex-col tw-relative tw-items-center tw-justify-between tw-p-12 tw-border tw-border-[#ececec] tw-rounded-[5px]">
		<div class="reviews-carousel__quote-wrapper tw-flex tw-flex-col tw-text-left tw-justify-between tw-items-start tw-relative tw-h-full tw-flex-grow tw-w-full">			
				<div class="review-top-wrapper tw-flex tw-flex-col tw-gap-4">
					<h3 class="reviews-carousel__headline tw-text-left tw-max-w-sm tw-font-normal tw-text-[32px] tw-leading-[36px] tw-m-0 md:tw-max-w-full tw-flex-grow tw-flex tw-items-center tw-gap-3">
						<ul class='reviews-overview__stars tw-text-[14px] tw-flex tw-items-center tw-gap-1'>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
						</ul>
					</h3>
					<div class="tw-text-[14px] tw-leading-[20px]">
						Love the fabric and color! Construction of the shirt is great and length and style is perfect.
						</div>
				</div>
				<a href="#" class="tw-text-[12px]">&ndash;Caleb C</a>
		</div>
	</div>
	<div class="swiper-slide reviews-carousel__quote !tw-flex tw-flex-col tw-relative tw-items-center tw-justify-between tw-p-12 tw-border tw-border-[#ececec] tw-rounded-[5px]">
		<div class="reviews-carousel__quote-wrapper tw-flex tw-flex-col tw-text-left tw-justify-between tw-items-start tw-relative tw-h-full tw-flex-grow tw-w-full">			
				<div class="review-top-wrapper tw-flex tw-flex-col tw-gap-4">
					<h3 class="reviews-carousel__headline tw-text-left tw-max-w-sm tw-font-normal tw-text-[32px] tw-leading-[36px] tw-m-0 md:tw-max-w-full tw-flex-grow tw-flex tw-items-center tw-gap-3">
						<ul class='reviews-overview__stars tw-text-[14px] tw-flex tw-items-center tw-gap-1'>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
							<li class='reviews-overview__star'><div class='reviews-overview__star-icon'>★</div></li>
						</ul>
					</h3>
					<div class="tw-text-[14px] tw-leading-[20px]">
						Was recommended to Alex Crane from a collègue and will be a returning customer. The two button downs i ordered fit me better than any other button down I’ve bought elsewhere and the feel of the linen is exactly what I’ve been looking for. I plan to order a few more shirts and some linen pants in the near future.
						</div>
				</div>
				<a href="#" class="tw-text-[12px]">&ndash;Patrick H</a>
		</div>
	</div>
{% endcapture %}

<section id='section-{{ section.id }}' class='product-reviews tw-py-12 lg:tw-py-24'>
  <div class='reviews-carousel page-width !tw-pr-0 tw-flex tw-flex-col tw-justify-center tw-items-center'>
    <!-- Swiper -->
    <div
      class='swiper reviews-carousel-swiper tw-relative tw-w-full{% if section.blocks.size <= section.settings.cell_count %} disabled-on-desktop{% endif %}'
      data-cell-count='{{ section.settings.cell_count }}'
    >
      <div class='swiper-wrapper'>
        {{ review_header }}
        {{ review_blocks }}
      </div>
      {% comment %}
           <!-- Navigation buttons -->
           <div class="swiper-button-next reviews-carousel-next tw-absolute tw-right-4 tw-top-1/2 tw-transform tw--translate-y-1/2 tw-w-12 tw-h-5 tw-bg-center tw-bg-no-repeat tw-bg-transparent tw-border-0 tw-p-0 tw-transition-opacity tw-duration-300 tw-ease-in-out tw-z-10 tw-cursor-pointer">
        	<span class="tw-sr-only">Next</span>
        </div>
           <div class="swiper-button-prev reviews-carousel-prev tw-absolute tw-left-4 tw-top-1/2 tw-transform tw--translate-y-1/2 tw-w-12 tw-h-5 tw-bg-center tw-bg-no-repeat tw-bg-transparent tw-border-0 tw-p-0 tw-transition-opacity tw-duration-300 tw-ease-in-out tw-z-10 tw-cursor-pointer tw-hidden">
        	<span class="tw-sr-only">Previous</span>
        </div>
      {% endcomment %}
    </div>
  </div>
</section>

<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css'>
<script src='https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js'></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const swiperElement = document.querySelector('#section-{{ section.id }} .reviews-carousel-swiper');

    if (swiperElement && !swiperElement.classList.contains('disabled-on-desktop')) {
      const cellCount = parseInt(swiperElement.dataset.cellCount) || 3;

      const swiper = new Swiper(swiperElement, {
        slidesPerView: 1.25,
        spaceBetween: 32,
        centeredSlides: false,
        slidePrevClass: 'reviews-carousel-prevup',
        slideNextClass: 'reviews-carousel-nextup',
        slideActiveClass: 'reviews-carousel-active',
        loop: false,

        /*navigation: {
          nextEl: '.reviews-carousel-next',
          prevEl: '.reviews-carousel-prev',
        },*/
        breakpoints: {
          750: {
            slidesPerView: 2,
          },
          990: {
            slidesPerView: 3.5,
          },
        },
      });
    }
  });
</script>
<style>
   #shopify-section-{{ section.id }} .reviews-carousel__title, #shopify-section-{{ section.id }} .reviews-carousel__price, #shopify-section-{{ section.id }} .reviews-carousel__variant-title {
   		color: {{ section.settings.text_color }} !important;
   }
   #shopify-section-{{ section.id }} .reviews-carousel__review {
   		color: {{ section.settings.background }} !important;
   }
   @media (max-width: 699px) {
   		#shopify-section-{{ section.id }} {
   				padding: {{ section.settings.padding_top_m }}px {{ section.settings.padding_right_m }}px {{ section.settings.padding_bottom_m }}px {{ section.settings.padding_left_m }}px;
   		}
   		#shopify-section-{{ section.id }} .reviews-carousel__review {
   				padding: {{ section.settings.inner_padding_top_m }}px {{ section.settings.inner_padding_right_m }}px {{ section.settings.inner_padding_bottom_m }}px {{ section.settings.inner_padding_left_m }}px;
   		}
   }
   @media (min-width: 700px) {
   		#shopify-section-{{ section.id }} {
   				padding: {{ section.settings.padding_top_d }}px {{ section.settings.padding_right_d }}px {{ section.settings.padding_bottom_d }}px {{ section.settings.padding_left_d }}px;
   		}
   		#shopify-section-{{ section.id }} .reviews-carousel__review {
   				padding: {{ section.settings.inner_padding_top_d }}px {{ section.settings.inner_padding_right_d }}px {{ section.settings.inner_padding_bottom_d }}px {{ section.settings.inner_padding_left_d }}px;
   		}
   }

  /* Swiper Carousel Styles */
  .reviews-carousel-swiper {
  	overflow: hidden;
  	position: relative;
  }

  /* Gradient overlays - base styles */
  .reviews-carousel-swiper::before,
  .reviews-carousel-swiper::after {
  	content: '';
  	position: absolute;
  	top: 0;
  	bottom: 0;
  	width: 100px;
  	z-index: 2;
  	pointer-events: none;
  	transition: opacity 0.3s ease;
  }



  .reviews-carousel-swiper .swiper-slide {
  	width: 50%;
  	min-height: 50vw;
  }

  @media (min-width: 700px) {
  	.reviews-carousel-swiper .swiper-slide {
  		width: 33.33%;
  		min-height: 20vw;
  	}
  }

  /* Navigation buttons */
  .reviews-carousel-next {
  	background-image: url("https://cdn.shopify.com/s/files/1/1892/3609/files/carousel-arrow-thick.svg?v=1683734748");
  	background-size: 24px;
  right: 36px !important;
  top: 50%;
  transform: translateY(-50%);
  margin-top: 0 !important;
  }

  .reviews-carousel-prev {
  	background-image: url("https://cdn.shopify.com/s/files/1/1892/3609/files/carousel-arrow-thick.svg?v=1683734748");
  	background-size: 24px;
  left: 36px !important;
  top: 50%;
  transform: translateY(-50%) rotate(180deg);
  margin-top: 0 !important;
  }

  .reviews-carousel-swiper.disabled-on-desktop .reviews-carousel-next,
  .reviews-carousel-swiper.disabled-on-desktop .reviews-carousel-prev {
  	display: none;
  }

  /* Content styles */
  .reviews-carousel__headline p {
  	display: contents;
  	font-size: 16px !important;
  }

  .detail-product .detail-label {
  	margin-left: 4px;
  	display: flex;
  	justify-content: center;
  	align-items: center;
  }

  .detail-product .detail-product-image {
  	width: 24px;
  	height: 24px;
  	border-radius: 24px;
  	overflow: hidden;
  }

  .reviews-carousel-prev.swiper-button-prev:after, .reviews-carousel-next.swiper-button-next:after {
  	content: none !important;
  }

  .reviews-carousel-prev, .reviews-carousel-next {
  	border: solid 1px var(--color-grey);
  border-radius: 48px;
  width: 48px !important;
  height: 48px !important;
  }
</style>

<div
  class='yotpo yotpo-main-widget'
  data-product-id='{{ product.id }}'
  data-name='{{ product.title | escape }}'
  data-url='{{ shop.url }}{{ product.url }}'
  data-image-url='{{ product.featured_image | product_img_url: 'large' |replace: '?', '%3F' | replace: '&','%26'}}'
  data-price='{{ variant.price | money_without_currency }}'
  data-currency='{{ shop.currency }}'
  data-description='{{ product.description | escape }}'
></div>

<link rel='stylesheet' href='{{ 'styles-yotpo.min.css' | asset_url }}' media='print' onload="this.media='all'">
<noscript>{{ 'styles-yotpo.min.css' | asset_url | stylesheet_tag }}</noscript>

{% schema %}
{
  "name": "Product Reviews",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Section Title"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Featured Review",
      "settings": [
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "unit": "★",
          "label": "Rating",
          "default": 5
        },
        {
          "type": "richtext",
          "id": "title",
          "label": "Review"
        },
        {
          "type": "text",
          "id": "reviewer",
          "label": "Reviewer Name"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "text",
          "id": "tag",
          "label": "Tag",
          "info": "This review will show for all products that have this tag."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Reviews",
      "blocks": []
    }
  ]
}
{% endschema %}
